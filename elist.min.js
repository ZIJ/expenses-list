(function(){function c(a){this.element=a?a:null}"use strict",window.elist||(window.elist={});var a=window.elist,b=window.document;a.ready=function(c){return b.addEventListener("DOMContentLoaded",c,!1),a},a.empty=function(a){var b=a.childNodes;for(var c=0;c<b.length;c+=1)a.removeChild(b[c]);return a},a.replace=function(a){var b={};return b.by=function(b){var c=a.parentNode,d=c&&typeof c=="object"&&typeof c.replaceChild=="function"&&a.parentNode===c;d&&c.replaceChild(b,a)},b},a.byId=function(a){var b=document.getElementById(a);return new c(b)},a.wrap=function(a){return new c(a)},c.prototype.isEmpty=function(){return!this.element},c.prototype.remove=function(){if(!this.isEmpty()){var a=this.element;a.parentNode.removeChild(a)}return this},c.prototype.append=function(a){if(!this.isEmpty()){var d=a instanceof c?a.element:a instanceof HTMLElement?a:b.createTextNode(a);this.element.appendChild(d)}return this}})(),function(){"use strict",window.elist||(window.elist={});var a=window.elist;a.EventEmitter=function(){this.listeners={}},a.EventEmitter.prototype.on=function(a,b){this.listeners[a]instanceof Array||(this.listeners[a]=[]),this.listeners[a].indexOf(b)===-1&&this.listeners[a].push(b)},a.EventEmitter.prototype.off=function(a,b){if(this.listeners[a]instanceof Array){var c=this.listeners[a].indexOf(b);c!==-1&&this.listeners[a].splice(c,1)}},a.EventEmitter.prototype.emit=function(a,b){b=b||{};if(this.listeners[a]instanceof Array){var c=this.listeners[a].length;for(var d=0;d<c;d+=1)this.listeners[a][d](this,b)}}}(),function(){"use strict",window.elist||(window.elist={});var a=window.elist;a.keyCodes={},a.keyCodes.ENTER=13,Function.prototype.inheritFrom=function(a){var b=new a;this.prototype=b},a.report=function(a){throw new Error(a?a:"Something went wrong")},a.assert=function(b,c){b||a.report(c?c:"Assertion failed")}}(),function(){"use strict",window.elist||(window.elist={});var a=window.elist;a.ObservableProperty=function(a){this.value=a},a.ObservableProperty.inheritFrom(a.EventEmitter),a.ObservableProperty.prototype.get=function(){return this.value},a.ObservableProperty.prototype.set=function(a){this.value!==a&&(this.value=a,this.emit("change"))},a.ObservableProperty.prototype.notify=function(a){this.on("change",a)},a.ObservableProperty.prototype.ignore=function(a){this.off("change",a)}}(),function(){"use strict",window.elist||(window.elist={});var a=window.elist;a.BaseModel=function(a,b){},a.BaseModel.prototype.assign=function(b){typeof b!="object"&&a.report("Properties should be object");for(var c in b)b.hasOwnProperty(c)&&(this[c]instanceof a.ObservableProperty||a.report("No such ObservableProperty: "+c),this[c].set(b[c]))},a.BaseModel.prototype.newId=function(b){return typeof b!="number"?a.report("ID should be number"):b<0?a.report("ID should be positive"):b!==Math.floor(b)&&a.report("ID should be integer"),b},a.BaseModel.prototype.newProp=function(b){return new a.ObservableProperty(b)}}(),function(){"use strict",window.elist||(window.elist={});var a=window.elist;a.ExpenseModel=function(a,b){this.id=this.newId(a),this.description=this.newProp(""),this.amount=this.newProp(0),this.date=this.newProp(new Date),this.isActive=this.newProp(!0),b!==undefined&&this.assign(b)},a.ExpenseModel.inheritFrom(a.BaseModel)}(),function(){"use strict",window.elist||(window.elist={});var a=window.elist;a.BaseView=function(){},a.BaseView.inheritFrom(a.EventEmitter),a.BaseView.prototype.renderTo=function(a){return this.parentNode=a,this.show()},a.BaseView.prototype.show=function(){return this.parentNode||a.report("Parent node unknown. Call renderTo() first."),this.parentNode.appendChild(this.node),this},a.BaseView.prototype.hide=function(){if(this.parentNode)try{this.parentNode.removeChild(this.node)}catch(a){}}}(),function(){"use strict",window.elist||(window.elist={});var a=window.elist;a.EditableView=function(b,c,d){var e=this;this.prop=b,this.parentNode=null,this.node=document.createElement("div"),this.viewControl=new a[d](b),this.editControl=new a[c](b),this.viewControl.parentNode=this.node,this.editControl.parentNode=this.node,this.viewControl.on("editRequest",function(){e.edit()}),this.editControl.on("saveRequest",function(){e.prop.set(e.getValue()),e.view()}),this.isEditing=!0,this.view()},a.EditableView.inheritFrom(a.BaseView),a.EditableView.prototype.view=function(){this.isEditing&&(this.editControl.hide(),this.viewControl.show(),this.isEditing=!1)},a.EditableView.prototype.edit=function(){this.isEditing||(this.viewControl.hide(),this.editControl.show(),this.isEditing=!0)},a.EditableView.prototype.getValue=function(){return this.isEditing?this.editControl.getValue():this.viewControl.getValue()}}(),function(){"use strict",window.elist||(window.elist={});var a=window.elist;a.ExpenseView=function(a){this.model=a,this.parentNode=null,this.node=document.createElement("tr");for(var b=0;b<6;b+=1)this.node.appendChild(document.createElement("td"));this.viewDescription()},a.ExpenseView.inheritFrom(a.BaseView),a.ExpenseView.prototype.viewDescription=function(){var b=this,c=b.model,d=b.node.children[0],e=function(){var b=document.createTextNode(c.description.get());a.empty(d).appendChild(b)};c.description.notify(e),e()},a.ExpenseView.prototype.editDescription=function(){var a=this.model,b=this.node.children[0],c=document.createElement("input");c.type="text"}}(),function(){"use strict",window.elist||(window.elist={});var a=window.elist;a.TextControl=function(a){var b=this;this.isEditing=!0,this.prop=a,this.parentNode=null,this.node=null,this.viewNode=document.createElement("span"),this.editNode=document.createElement("input"),this.editNode.type="text",this.viewNode.addEventListener("click",function(){b.edit()},!1),this.editNode.addEventListener("change",function(){b.save()},!1),this.prop.notify(function(){b.update()}),this.view()},a.TextControl.inheritFrom(a.BaseView),a.TextControl.prototype.view=function(){if(this.isEditing===!0){if(this.parentNode){try{this.parentNode.removeChild(this.editNode)}catch(a){}this.parentNode.appendChild(this.viewNode)}this.node=this.viewNode,this.isEditing=!1,this.update()}},a.TextControl.prototype.edit=function(){if(this.isEditing===!1){if(this.parentNode){try{this.parentNode.removeChild(this.viewNode)}catch(a){}this.parentNode.appendChild(this.editNode)}this.node=this.viewNode,this.isEditing=!0,this.update()}},a.TextControl.prototype.save=function(){this.isEditing===!0&&this.emit("saveRequest")},a.TextControl.prototype.getText=function(){return this.isEditing===!0?this.editNode.value:this.viewNode.innerHTML},a.TextControl.prototype.update=function(){var a=this.prop.get();this.viewNode.innerHTML=a,this.editNode.value=a},a.TextControl.prototype.renderTo=function(a){var b=this;a.appendChild(this.node),this.parentNode=a}}(),function(){"use strict",window.elist||(window.elist={});var a=window.elist;a.TextEdit=function(b){var c=this;this.prop=b,this.parentNode=null,this.node=document.createElement("input"),this.node.type="text",this.node.addEventListener("change",function(){c.emit("saveRequest")},!1),this.node.addEventListener("keypress",function(b){b.keyCode===a.keyCodes.ENTER&&c.emit("saveRequest")},!1),this.prop.notify(function(){c.update()}),this.update()},a.TextEdit.inheritFrom(a.BaseView),a.TextEdit.prototype.update=function(){this.node.value=this.prop.get()},a.TextEdit.prototype.getValue=function(){return this.node.value}}(),function(){"use strict",window.elist||(window.elist={});var a=window.elist;a.TextView=function(a){var b=this;this.prop=a,this.parentNode=null,this.node=document.createElement("p"),this.node.addEventListener("dblclick",function(){b.emit("editRequest")},!1),this.prop.notify(function(){b.update()}),this.update()},a.TextView.inheritFrom(a.BaseView),a.TextView.prototype.update=function(){this.node.innerHTML=this.prop.get()},a.TextView.prototype.getValue=function(){return this.node.innerHTML}}(),function(){"use strict",window.elist||(window.elist={});var a=window.elist;a.ready(function(){var b=new a.ExpenseModel(13);b.description.set("Description");var c=new a.EditableView(b.description,"TextEdit","TextView"),d=document.createElement("div");c.renderTo(d),document.body.appendChild(d),setTimeout(function(){b.description.set("Updated")},1e3)})}();